import{ak as R,al as fe,am as M,j as O,g as K,an as T,ao as Q,ap as Z,o as U,ah as ze,ag as xe,aq as ge,ar as Se,c as _e,as as b,i as Pe,at as we,au as q,r as E,a as h,b as _,w as z,e as N,h as Me,_ as ye}from"./index-BkivclCA.js";const be={__name:"splitpanes",props:{horizontal:{type:Boolean,default:!1},pushOtherPanes:{type:Boolean,default:!0},maximizePanes:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean,default:!1}},emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click","splitter-dblclick"],setup(k,{emit:u}){const P=u,d=k,B=Se(),s=O([]),w=M(()=>s.value.reduce((e,a)=>(e[~~a.id]=a)&&e,{})),x=M(()=>s.value.length),m=O(null),c=O(!1),p=O({mouseDown:!1,dragging:!1,activeSplitter:null,cursorOffset:0}),f=O({splitter:null,timeoutId:null}),L=M(()=>({[`splitpanes splitpanes--${d.horizontal?"horizontal":"vertical"}`]:!0,"splitpanes--dragging":p.value.dragging})),C=()=>{document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",y),"ontouchstart"in window&&(document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",y))},I=()=>{document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",y),"ontouchstart"in window&&(document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",y))},$=(e,a)=>{const i=e.target.closest(".splitpanes__splitter");if(i){const{left:n,top:t}=i.getBoundingClientRect(),{clientX:l,clientY:o}="ontouchstart"in window&&e.touches?e.touches[0]:e;p.value.cursorOffset=d.horizontal?o-t:l-n}C(),p.value.mouseDown=!0,p.value.activeSplitter=a},r=e=>{p.value.mouseDown&&(e.preventDefault(),p.value.dragging=!0,requestAnimationFrame(()=>{ne(ee(e)),g("resize",{event:e},!0)}))},y=e=>{p.value.dragging&&(window.getSelection().removeAllRanges(),g("resized",{event:e},!0)),p.value.mouseDown=!1,p.value.activeSplitter=null,setTimeout(()=>{p.value.dragging=!1,I()},100)},F=(e,a)=>{"ontouchstart"in window&&(e.preventDefault(),f.value.splitter===a?(clearTimeout(f.value.timeoutId),f.value.timeoutId=null,H(e,a),f.value.splitter=null):(f.value.splitter=a,f.value.timeoutId=setTimeout(()=>f.value.splitter=null,500))),p.value.dragging||g("splitter-click",{event:e,index:a},!0)},H=(e,a)=>{if(g("splitter-dblclick",{event:e,index:a},!0),d.maximizePanes){let i=0;s.value=s.value.map((n,t)=>(n.size=t===a?n.max:n.min,t!==a&&(i+=n.min),n)),s.value[a].size-=i,g("pane-maximize",{event:e,index:a,pane:s.value[a]}),g("resized",{event:e,index:a},!0)}},G=(e,a)=>{g("pane-click",{event:e,index:w.value[a].index,pane:w.value[a]})},ee=e=>{const a=m.value.getBoundingClientRect(),{clientX:i,clientY:n}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:i-(d.horizontal?0:p.value.cursorOffset)-a.left,y:n-(d.horizontal?p.value.cursorOffset:0)-a.top}},ae=e=>{e=e[d.horizontal?"y":"x"];const a=m.value[d.horizontal?"clientHeight":"clientWidth"];return d.rtl&&!d.horizontal&&(e=a-e),e*100/a},ne=e=>{const a=p.value.activeSplitter;let i={prevPanesSize:J(a),nextPanesSize:D(a),prevReachedMinPanes:0,nextReachedMinPanes:0};const n=0+(d.pushOtherPanes?0:i.prevPanesSize),t=100-(d.pushOtherPanes?0:i.nextPanesSize),l=Math.max(Math.min(ae(e),t),n);let o=[a,a+1],v=s.value[o[0]]||null,S=s.value[o[1]]||null;const X=v.max<100&&l>=v.max+i.prevPanesSize,he=S.max<100&&l<=100-(S.max+D(a+1));if(X||he){X?(v.size=v.max,S.size=Math.max(100-v.max-i.prevPanesSize-i.nextPanesSize,0)):(v.size=Math.max(100-S.max-i.prevPanesSize-D(a+1),0),S.size=S.max);return}if(d.pushOtherPanes){const Y=te(i,l);if(!Y)return;({sums:i,panesToResize:o}=Y),v=s.value[o[0]]||null,S=s.value[o[1]]||null}v!==null&&(v.size=Math.min(Math.max(l-i.prevPanesSize-i.prevReachedMinPanes,v.min),v.max)),S!==null&&(S.size=Math.min(Math.max(100-l-i.nextPanesSize-i.nextReachedMinPanes,S.min),S.max))},te=(e,a)=>{const i=p.value.activeSplitter,n=[i,i+1];return a<e.prevPanesSize+s.value[n[0]].min&&(n[0]=ie(i).index,e.prevReachedMinPanes=0,n[0]<i&&s.value.forEach((t,l)=>{l>n[0]&&l<=i&&(t.size=t.min,e.prevReachedMinPanes+=t.min)}),e.prevPanesSize=J(n[0]),n[0]===void 0)?(e.prevReachedMinPanes=0,s.value[0].size=s.value[0].min,s.value.forEach((t,l)=>{l>0&&l<=i&&(t.size=t.min,e.prevReachedMinPanes+=t.min)}),s.value[n[1]].size=100-e.prevReachedMinPanes-s.value[0].min-e.prevPanesSize-e.nextPanesSize,null):a>100-e.nextPanesSize-s.value[n[1]].min&&(n[1]=se(i).index,e.nextReachedMinPanes=0,n[1]>i+1&&s.value.forEach((t,l)=>{l>i&&l<n[1]&&(t.size=t.min,e.nextReachedMinPanes+=t.min)}),e.nextPanesSize=D(n[1]-1),n[1]===void 0)?(e.nextReachedMinPanes=0,s.value.forEach((t,l)=>{l<x.value-1&&l>=i+1&&(t.size=t.min,e.nextReachedMinPanes+=t.min)}),s.value[n[0]].size=100-e.prevPanesSize-D(n[0]-1),null):{sums:e,panesToResize:n}},J=e=>s.value.reduce((a,i,n)=>a+(n<e?i.size:0),0),D=e=>s.value.reduce((a,i,n)=>a+(n>e+1?i.size:0),0),ie=e=>[...s.value].reverse().find(a=>a.index<e&&a.size>a.min)||{},se=e=>s.value.find(a=>a.index>e+1&&a.size>a.min)||{},le=()=>{var e;const a=Array.from(((e=m.value)==null?void 0:e.children)||[]);for(const i of a){const n=i.classList.contains("splitpanes__pane"),t=i.classList.contains("splitpanes__splitter");!n&&!t&&(i.remove(),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed."))}},W=(e,a,i=!1)=>{const n=e-1,t=document.createElement("div");t.classList.add("splitpanes__splitter"),i||(t.onmousedown=l=>$(l,n),typeof window<"u"&&"ontouchstart"in window&&(t.ontouchstart=l=>$(l,n)),t.onclick=l=>F(l,n+1)),t.ondblclick=l=>H(l,n+1),a.parentNode.insertBefore(t,a)},oe=e=>{e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.remove()},A=()=>{var e;const a=Array.from(((e=m.value)==null?void 0:e.children)||[]);for(const n of a)n.className.includes("splitpanes__splitter")&&oe(n);let i=0;for(const n of a)n.className.includes("splitpanes__pane")&&(!i&&d.firstSplitter?W(i,n,!0):i&&W(i,n),i++)},ue=({uid:e,...a})=>{const i=w.value[e];for(const[n,t]of Object.entries(a))i[n]=t},re=e=>{var a;let i=-1;Array.from(((a=m.value)==null?void 0:a.children)||[]).some(n=>(n.className.includes("splitpanes__pane")&&i++,n.isSameNode(e.el))),s.value.splice(i,0,{...e,index:i}),s.value.forEach((n,t)=>n.index=t),c.value&&q(()=>{A(),j({addedPane:s.value[i]}),g("pane-add",{pane:s.value[i]})})},de=e=>{const a=s.value.findIndex(n=>n.id===e);s.value[a].el=null;const i=s.value.splice(a,1)[0];s.value.forEach((n,t)=>n.index=t),q(()=>{A(),g("pane-remove",{pane:i}),j({removedPane:{...i}})})},j=(e={})=>{!e.addedPane&&!e.removedPane?me():s.value.some(a=>a.givenSize!==null||a.min||a.max<100)?ve(e):pe(),c.value&&g("resized")},pe=()=>{const e=100/x.value;let a=0;const i=[],n=[];for(const t of s.value)t.size=Math.max(Math.min(e,t.max),t.min),a-=t.size,t.size>=t.max&&i.push(t.id),t.size<=t.min&&n.push(t.id);a>.1&&V(a,i,n)},me=()=>{let e=100;const a=[],i=[];let n=0;for(const l of s.value)e-=l.size,l.givenSize!==null&&n++,l.size>=l.max&&a.push(l.id),l.size<=l.min&&i.push(l.id);let t=100;if(e>.1){for(const l of s.value)l.givenSize===null&&(l.size=Math.max(Math.min(e/(x.value-n),l.max),l.min)),t-=l.size;t>.1&&V(t,a,i)}},ve=({addedPane:e,removedPane:a}={})=>{let i=100/x.value,n=0;const t=[],l=[];((e==null?void 0:e.givenSize)??null)!==null&&(i=(100-e.givenSize)/(x.value-1));for(const o of s.value)n-=o.size,o.size>=o.max&&t.push(o.id),o.size<=o.min&&l.push(o.id);if(!(Math.abs(n)<.1)){for(const o of s.value)(e==null?void 0:e.givenSize)!==null&&(e==null?void 0:e.id)===o.id||(o.size=Math.max(Math.min(i,o.max),o.min)),n-=o.size,o.size>=o.max&&t.push(o.id),o.size<=o.min&&l.push(o.id);n>.1&&V(n,t,l)}},V=(e,a,i)=>{let n;e>0?n=e/(x.value-a.length):n=e/(x.value-i.length),s.value.forEach((t,l)=>{if(e>0&&!a.includes(t.id)){const o=Math.max(Math.min(t.size+n,t.max),t.min),v=o-t.size;e-=v,t.size=o}else if(!i.includes(t.id)){const o=Math.max(Math.min(t.size+n,t.max),t.min),v=o-t.size;e-=v,t.size=o}}),Math.abs(e)>.1&&q(()=>{c.value&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})},g=(e,a=void 0,i=!1)=>{const n=(a==null?void 0:a.index)??p.value.activeSplitter??null;P(e,{...a,...n!==null&&{index:n},...i&&n!==null&&{prevPane:s.value[n-(d.firstSplitter?1:0)],nextPane:s.value[n+(d.firstSplitter?0:1)]},panes:s.value.map(t=>({min:t.min,max:t.max,size:t.size}))})};T(()=>d.firstSplitter,()=>A()),Q(()=>{le(),A(),j(),g("ready"),c.value=!0}),Z(()=>c.value=!1);const ce=()=>{var e;return we("div",{ref:m,class:L.value},(e=B.default)==null?void 0:e.call(B))};return b("panes",s),b("indexedPanes",w),b("horizontal",M(()=>d.horizontal)),b("requestUpdate",ue),b("onPaneAdd",re),b("onPaneRemove",de),b("onPaneClick",G),(e,a)=>(U(),_e(Pe(ce)))}},ke={__name:"pane",props:{size:{type:[Number,String]},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},setup(k){var u;const P=k,d=R("requestUpdate"),B=R("onPaneAdd"),s=R("horizontal"),w=R("onPaneRemove"),x=R("onPaneClick"),m=(u=fe())==null?void 0:u.uid,c=R("indexedPanes"),p=M(()=>c.value[m]),f=O(null),L=M(()=>{const r=isNaN(P.size)||P.size===void 0?0:parseFloat(P.size);return Math.max(Math.min(r,I.value),C.value)}),C=M(()=>{const r=parseFloat(P.minSize);return isNaN(r)?0:r}),I=M(()=>{const r=parseFloat(P.maxSize);return isNaN(r)?100:r}),$=M(()=>{var r;return`${s.value?"height":"width"}: ${(r=p.value)==null?void 0:r.size}%`});return T(()=>L.value,r=>d({uid:m,size:r})),T(()=>C.value,r=>d({uid:m,min:r})),T(()=>I.value,r=>d({uid:m,max:r})),Q(()=>{B({id:m,el:f.value,min:C.value,max:I.value,givenSize:P.size===void 0?null:L.value,size:L.value})}),Z(()=>w(m)),(r,y)=>(U(),K("div",{ref_key:"paneEl",ref:f,class:"splitpanes__pane",onClick:y[0]||(y[0]=F=>ge(x)(F,r._.uid)),style:xe($.value)},[ze(r.$slots,"default")],4))}},Re={class:"w-flex align-center wrap mt8"};function Ee(k,u,P,d,B,s){const w=E("title-link"),x=E("w-icon"),m=E("ssh-pre"),c=E("pane"),p=E("splitpanes"),f=E("w-list");return U(),K("main",null,[h(w,{class:"mt4",h1:""},{default:z(()=>u[0]||(u[0]=[N("Splitter")])),_:1,__:[0]}),u[10]||(u[10]=_("p",null,[N("The work is already done in this library! Check out"),_("a",{class:"mx1",href:"https://antoniandre.github.io/splitpanes",target:"_blank"},"Splitpanes"),N("by the same awesome author! ;)")],-1)),_("div",Re,[h(x,{class:"grey-light4 ml-2 mr2",xl:""},{default:z(()=>u[1]||(u[1]=[N("mdi mdi-chevron-right")])),_:1,__:[1]}),u[2]||(u[2]=Me('<a class="title2 my0 mr2" href="https://antoniandre.github.io/splitpanes" target="_blank">Splitpanes</a><a class="my2 mr1" href="https://www.npmjs.com/package/splitpanes" target="_blank"><img class="mb-1" src="https://img.shields.io/npm/dt/splitpanes.svg"></a><a class="my2" href="https://www.npmjs.com/package/splitpanes" target="_blank"><img class="mb-1" src="https://img.shields.io/npm/dw/splitpanes.svg"></a>',3))]),h(m,{class:"mt6",language:"shell",dark:k.$store.state.darkMode},{default:z(()=>u[3]||(u[3]=[N("npm i splitpanes")])),_:1,__:[3]},8,["dark"]),h(p,{class:"default-theme mt8"},{default:z(()=>[h(c,{"min-size":"20"},{default:z(()=>u[4]||(u[4]=[_("span",null,"1",-1),_("em",{class:"specs"},"I have a min width of 20%",-1)])),_:1,__:[4]}),h(c,null,{default:z(()=>[h(p,{class:"default-theme",horizontal:""},{default:z(()=>[h(c,{"min-size":"15"},{default:z(()=>u[5]||(u[5]=[_("span",null,"2",-1),_("em",{class:"specs"},"I have a min height of 15%",-1)])),_:1,__:[5]}),h(c,null,{default:z(()=>u[6]||(u[6]=[_("span",null,"3",-1)])),_:1,__:[6]}),h(c,null,{default:z(()=>u[7]||(u[7]=[_("span",null,"4",-1)])),_:1,__:[7]})]),_:1})]),_:1}),h(c,null,{default:z(()=>u[8]||(u[8]=[_("span",null,"5",-1)])),_:1,__:[8]})]),_:1}),h(w,{h2:""},{default:z(()=>u[9]||(u[9]=[N("Features")])),_:1,__:[9]}),h(f,{items:k.listItems,icon:"wi-check"},null,8,["items"])])}const Ne={components:{Splitpanes:be,Pane:ke},data:()=>({listItems:[{label:"Light weight & no dependencies (only Vue JS)"},{label:"Define your panes, the splitters are added automatically"},{label:"Fully responsive"},{label:"Supports touch devices"},{label:"Supports nesting"},{label:"Push other panes or not"},{label:"Double click a splitter to maximize pane"},{label:"Programmatically set pane width or height"},{label:"Programmatically add and remove panes"},{label:"Supports v-if directive and v-router component"}]})},Be=ye(Ne,[["render",Ee]]);export{Be as default};
